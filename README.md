# dbt-ecommerce-dwh

## Dimensional model
fact_orders:
 - order_id (PK)
 - order_num
 - time_id
 - customer_id
 - product_id
 - unit_price
 - quantity
 - discount
 - total_amount

dim_customer:
 - customer_id (PK)
 - customer_cd
 - surname
 - name
 - address
 - city
 - region
 - country
 - postal_code
 - email

dim_product:
 - product_id (PK)
 - product_cd
 - name
 - description
 - category
 - price

dim_time:
 - time_id (PK)
 - year
 - month
 - day
 - hour
 - minute
 - second



(sudo docker stop dbt || exit 0) && \
(sudo docker rm dbt || exit 0) \
sudo docker run -t -d --name dbt dbt-ecommerce-dwh:latest

sudo docker exec -it dbt /bin/bash

## Static solution diagram:
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="459px" viewBox="-0.5 -0.5 459 331" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2023-03-01T14:37:34.508Z&quot; agent=&quot;5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36&quot; etag=&quot;gAYgRlOcQhaYt5Y0Tyf9&quot; version=&quot;20.8.20&quot; type=&quot;github&quot;&gt;&lt;diagram name=&quot;Page-1&quot; id=&quot;inqkVHeh0xrj3aVSnbid&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://viewer.diagrams.net/?client=1&amp;page=0&amp;edit=_blank');}}})(this);" style="cursor:pointer;max-width:100%;max-height:331px;"><defs/><g><rect x="277" y="140" width="179" height="60" rx="1" ry="1" fill="#000000" stroke="#000000" pointer-events="all" transform="translate(2,3)" opacity="0.25"/><rect x="277" y="140" width="179" height="60" rx="1" ry="1" fill="rgb(255, 255, 255)" stroke="#dddddd" pointer-events="all"/><image x="291.5" y="154.5" width="30" height="30" xlink:href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnY9Imh0dHBzOi8vdmVjdGEuaW8vbmFubyIgd2lkdGg9IjIwLjAwMTA0NTIyNzA1MDc4IiBoZWlnaHQ9IjIwLjAwMTA0NTIyNzA1MDc4IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHZpZXdCb3g9IjAgMCAyMC4wMDEwNDUyMjcwNTA3OCAyMC4wMDEwNDUyMjcwNTA3OCI+JiN4YTsJPHN0eWxlIHR5cGU9InRleHQvY3NzIj4mI3hhOwkuc3Qwe2ZpbGw6I2FlY2JmYTt9JiN4YTsJLnN0MXtmaWxsOiM2NjlkZjY7fSYjeGE7CS5zdDJ7ZmlsbDojNDI4NWY0O30mI3hhOwk8L3N0eWxlPiYjeGE7CTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00LjczIDguODN2Mi42M2E0LjkxIDQuOTEgMCAwIDAgMS43MSAxLjc0VjguODN6Ii8+JiN4YTsJPHBhdGggY2xhc3M9InN0MSIgZD0iTTcuODkgNi40MXY3LjUzQTcuNjIgNy42MiAwIDAgMCA5IDE0YTggOCAwIDAgMCAxIDBWNi40MXoiLz4mI3hhOwk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTEuNjQgOS44NnYzLjI5YTUgNSAwIDAgMCAxLjctMS44MlY5Ljg2eiIvPiYjeGE7CTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0xNS43NCAxNC4zMmwtMS40MiAxLjQyYS40Mi40MiAwIDAgMCAwIC42bDMuNTQgMy41NGEuNDIuNDIgMCAwIDAgLjU5IDBsMS40My0xLjQzYS40Mi40MiAwIDAgMCAwLS41OWwtMy41NC0zLjU0YS40Mi40MiAwIDAgMC0uNiAwIi8+JiN4YTsJPHBhdGggY2xhc3M9InN0MSIgZD0iTTkgMGE5IDkgMCAxIDAgMCAxOEE5IDkgMCAxIDAgOSAwbTAgMTUuNjlhNi42OCA2LjY4IDAgMCAxIC4wMDctMTMuMzYgNi42OCA2LjY4IDAgMCAxIDQuNzI3IDExLjQwM0E2LjY4IDYuNjggMCAwIDEgOSAxNS42OSIvPiYjeGE7PC9zdmc+" preserveAspectRatio="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 170px; margin-left: 344px;"><div data-drawio-colors="color: #999999; background-color: #ffffff; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(153, 153, 153); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;"><font color="#000000">dbt_ecommerce</font><br />BigQuery</div></div></div></foreignObject><text x="344" y="174" fill="#999999" font-family="Helvetica" font-size="12px">dbt_e...</text></switch></g><rect x="0" y="140" width="146" height="60" rx="1" ry="1" fill="#000000" stroke="#000000" pointer-events="all" transform="translate(2,3)" opacity="0.25"/><rect x="0" y="140" width="146" height="60" rx="1" ry="1" fill="rgb(255, 255, 255)" stroke="#dddddd" pointer-events="all"/><image x="14.5" y="154.5" width="30" height="30" xlink:href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnY9Imh0dHBzOi8vdmVjdGEuaW8vbmFubyIgd2lkdGg9IjM2NS40NjQ5OTY3NzA0MjQ5MyIgaGVpZ2h0PSIzNzkuMjIyOTk0NDYzNTc3OTUiIHZpZXdCb3g9IjAgMCA5Ni42OTU5OTkxNDU1MDc4MSAxMDAuMzM1OTk4NTM1MTU2MjUiPiYjeGE7PHN0eWxlIHR5cGU9InRleHQvY3NzIj4mI3hhOwkuc3Qwe2ZpbGw6IzQyODVmNDt9JiN4YTsJLnN0MXtmaWxsOiNhZWNiZmE7fSYjeGE7PC9zdHlsZT4mI3hhOwk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjkuNzk0IDEwMC4zMzZMNDYuOTIgNTAuMTY4aDQ5Ljc3NnpNMCA5OS42NzFsMTIuOTc2LTQ5LjUwMkgyOS4yMkwxNi44OTcgOTIuMDU0eiIvPiYjeGE7CTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yOS43OTQgMEw0Ni45MiA1MC4xNjhoNDkuNzc2ek0wIC42NjZsMTIuOTc2IDQ5LjUwMkgyOS4yMkwxNi44OTcgOC4yODN6Ii8+JiN4YTs8L3N2Zz4=" preserveAspectRatio="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 170px; margin-left: 67px;"><div data-drawio-colors="color: #999999; background-color: #ffffff; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(153, 153, 153); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;"><br />Cloud Run</div></div></div></foreignObject><text x="67" y="174" fill="#999999" font-family="Helvetica" font-size="12px">Cloud...</text></switch></g><image x="66.88" y="147.5" width="51.74" height="19.83" xlink:href="https://seeklogo.com/images/D/dbt-logo-E4B0ED72A2-seeklogo.com.png" preserveAspectRatio="none"/><image x="52.5" y="-0.5" width="40" height="42" xlink:href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnY9Imh0dHBzOi8vdmVjdGEuaW8vbmFubyIgd2lkdGg9IjM2MC4zMDM3NjY4NjA4MzYzIiBoZWlnaHQ9IjM3OC4wNTExNTgwNzc0MDg4IiB2aWV3Qm94PSItMC4wMDAxNjI0MjExNDM2MTM3NTU3IC0wLjAwMDEwMDAwNTk0OTIwNzExNTkyIDk1LjMzMDI2MTIzMDQ2ODc1IDEwMC4wMjYxMDAxNTg2OTE0Ij4mI3hhOzxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+JiN4YTsJLnN0MHtmaWxsOiM0Mjg1ZjQ7fSYjeGE7CS5zdDF7ZmlsbDojYWVjYmZhO30mI3hhOwkuc3Qye2ZpbGw6IzY2OWRmNjt9JiN4YTs8L3N0eWxlPiYjeGE7CTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik03OS45NzEgNzcuNzE1bC03LjM1OSA3LjQ4OCA4LjYzOSA4LjQ5IDcuMzU5LTcuNDg4em0tNjUuMDk2LjA2MWwtOC42NDEgOC40OTIgNy4zNjEgNy40ODggOC42MzktOC40OXoiLz4mI3hhOwk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNzkuNTUzLjIyMWE1LjI1IDUuMjUgMCAwIDAtMy42NiA4Ljk4NEw4Ni4zODkgMTkuNThhNS4yNSA1LjI1IDAgMCAwIDguOTQxLTMuNzY1IDUuMjUgNS4yNSAwIDAgMC0xLjU2LTMuNzA0TDgzLjI3NSAxLjczOEE1LjI1IDUuMjUgMCAwIDAgNzkuNTUzLjIyMXpNMTUuOTE2IDBhNS4yNSA1LjI1IDAgMCAwLTMuNzIzIDEuNTE2TDEuNjk5IDExLjg5MWE1LjI1IDUuMjUgMCAwIDAtLjA0MyA3LjQyNCA1LjI1IDUuMjUgMCAwIDAgNy40MjQuMDQzTDE5LjU3NiA4Ljk4MkE1LjI1IDUuMjUgMCAwIDAgMTUuOTE2IDB6Ii8+JiN4YTsJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQ4LjEzOCAyNi4yNGMxMy4zNDcgMCAyNS40MzIgMTEuMTM2IDI1LjMxIDI2LjQ4MSAwIDE1LjExLTEyLjI2NyAyNS42NzMtMjUuMTg5IDI1LjY3My0xMS4xNDkgMC0xOC4zMTctNS4xNzEtMjEuOTYtMTAuNzM4bDIxLjgzOS0xNS4wOTd6Ii8+JiN4YTsJPHBhdGggY2xhc3M9InN0MiIgZD0iTTgxLjI1IDkzLjY5M2w0LjY2NCA0LjU4NmE1LjI1IDUuMjUgMCAxIDAgNy4zNjEtNy40OWwtNC42NjYtNC41ODR6TTYuMjM0IDg2LjI2OEwxLjU3IDkwLjg1MWE1LjI1IDUuMjUgMCAwIDAtLjA2NSA3LjQyNCA1LjI1IDUuMjUgMCAwIDAgNy40MjQuMDY0bDQuNjY2LTQuNTg0ek00Ny4zNzEgNS41NzhDMjEuMzQ5IDUuNTc4LjE0NiAyNi43NzkuMTQ2IDUyLjgwMXMyMS4yMDMgNDcuMjI1IDQ3LjIyNSA0Ny4yMjUgNDcuMjI1LTIxLjIwMyA0Ny4yMjUtNDcuMjI1UzczLjM5MyA1LjU3OCA0Ny4zNzEgNS41Nzh6bTAgMTBhMzcuMTUgMzcuMTUgMCAwIDEgMzcuMjI1IDM3LjIyM2MwIDIwLjYxNy0xNi42MDcgMzcuMjI1LTM3LjIyNSAzNy4yMjVTMTAuMTQ2IDczLjQxOCAxMC4xNDYgNTIuODAxYTM3LjE1IDM3LjE1IDAgMCAxIDM3LjIyNS0zNy4yMjN6Ii8+JiN4YTs8L3N2Zz4=" preserveAspectRatio="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 43px; margin-left: 73px;"><div data-drawio-colors="color: #999999; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(153, 153, 153); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: nowrap;">Cloud<br />Scheduler</div></div></div></foreignObject><text x="73" y="54" fill="#999999" font-family="Helvetica" font-size="11px" text-anchor="middle" font-weight="bold">Cloud...</text></switch></g><path d="M 73 70 L 73 131.76" fill="none" stroke="#4284f3" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 73 137.76 L 71 131.76 L 75 131.76 Z" fill="#4284f3" stroke="#4284f3" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><path d="M 146 170 L 268.76 170" fill="none" stroke="#4284f3" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 274.76 170 L 268.76 172 L 268.76 168 Z" fill="#4284f3" stroke="#4284f3" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 170px; margin-left: 212px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">transformation</div></div></div></foreignObject><text x="212" y="174" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">transformation</text></switch></g><path d="M 361.5 260 L 361.5 230 L 366.5 230 L 366.5 200" fill="none" stroke="#4284f3" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 230px; margin-left: 365px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">external tables</div></div></div></foreignObject><text x="365" y="234" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">external tables</text></switch></g><rect x="276" y="260" width="180" height="60" rx="1" ry="1" fill="#000000" stroke="#000000" pointer-events="all" transform="translate(2,3)" opacity="0.25"/><rect x="276" y="260" width="180" height="60" rx="1" ry="1" fill="rgb(255, 255, 255)" stroke="#dddddd" pointer-events="all"/><image x="290.5" y="277.5" width="30" height="24" xlink:href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnY9Imh0dHBzOi8vdmVjdGEuaW8vbmFubyIgd2lkdGg9IjIwIiBoZWlnaHQ9IjE2IiB2aWV3Qm94PSIwIDAgMjAgMTYiPiYjeGE7CTxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+JiN4YTsJLnN0MHtmaWxsOiM0Mjg1ZjQ7fSYjeGE7CS5zdDF7ZmlsbDojNjY5ZGY2O30mI3hhOwkuc3Qye2ZpbGw6I2FlY2JmYTt9JiN4YTsJLnN0M3tmaWxsOiNmZmY7fSYjeGE7CTwvc3R5bGU+JiN4YTsJPHBhdGggY2xhc3M9InN0MiIgZD0iTTAgMGgyMHY3SDB6Ii8+JiN4YTsJPHBhdGggY2xhc3M9InN0MSIgZD0iTTE4IDBoMnY3aC0yeiIvPiYjeGE7CTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xOCA3bDItN2gtMnoiLz4mI3hhOwk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMCAwaDJ2N0gweiIvPiYjeGE7CTxnIGNsYXNzPSJzdDMiPiYjeGE7CQk8cGF0aCBkPSJNNCAzaDZ2MUg0eiIvPiYjeGE7CQk8cmVjdCB4PSIxMyIgeT0iMiIgd2lkdGg9IjMiIGhlaWdodD0iMyIgcng9IjEuNSIvPiYjeGE7CTwvZz4mI3hhOwk8cGF0aCBjbGFzcz0ic3QyIiBkPSJNMCA5aDIwdjdIMHoiLz4mI3hhOwk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTggOWgydjdoLTJ6Ii8+JiN4YTsJPHBhdGggY2xhc3M9InN0MCIgZD0iTTE4IDE2bDItN2gtMnoiLz4mI3hhOwk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMCA5aDJ2N0gweiIvPiYjeGE7CTxnIGNsYXNzPSJzdDMiPiYjeGE7CQk8cGF0aCBkPSJNNCAxMmg2djFINHoiLz4mI3hhOwkJPHJlY3QgeD0iMTMiIHk9IjExIiB3aWR0aD0iMyIgaGVpZ2h0PSIzIiByeD0iMS41Ii8+JiN4YTsJPC9nPiYjeGE7PC9zdmc+" preserveAspectRatio="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 290px; margin-left: 343px;"><div data-drawio-colors="color: #999999; background-color: #ffffff; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(153, 153, 153); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;"><font color="#000000">dbt_ecommerce_raw</font><br />Cloud Storage</div></div></div></foreignObject><text x="343" y="294" fill="#999999" font-family="Helvetica" font-size="12px">dbt_e...</text></switch></g><path d="M 146 290 L 269.63 290" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 274.88 290 L 267.88 293.5 L 269.63 290 L 267.88 286.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 290px; margin-left: 211px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">source feeds</div></div></div></foreignObject><text x="211" y="294" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">source feeds</text></switch></g><rect x="16" y="260" width="130" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="0" y="270" width="136" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 134px; height: 1px; padding-top: 300px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Operational systems</div></div></div></foreignObject><text x="68" y="304" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Operational systems</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>

## How to prepare your virtual environment to make sure you are working with python >= 3.8

(Make sure you have python3.8 intalled on your system)
```bash
python3.8 -m venv .venv

source .venv/bin/activate

pip install --upgrade pip

pip install --upgrade setuptools
pip install --upgrade wheel

```

## Install dbt and other dependencies (see requirements.txt)
```bash
pip install -r requirements.txt
```

## Make dbt install its own deps (see file packages.yml)
```
dbt deps
```

## Create external tables
```bash
dbt run-operation stage_external_sources
```

## Command to put in container
```bash
dbt run-operation stage_external_sources && \
    dbt snapshot && \
    dbt run \
    dbt test
```